# 为什么需要hook

## class组件的优势

- class可以定义自己的state,用来保存自己的状态。函数组件每次调用都会产生新的临时变量
- class有生命周期
- class可以在状态改变时只重新执行render以及生命周期componentDidUpdate而函数组件整个函数都会重新执行

## class组件的问题

- 组件难以理解

  比如在componentDidMount中会包含大量逻辑代码，网络请求和一些事件监听，还需要在unMount事件中移除

- 太过整合无法拆分，逻辑混杂

- this指向麻烦 
- 状态共享方式复杂，如context.provider

# useState

## 初体验

useState

本身是一个函数

参数: 给创建出来的状态一个默认值

返回值: 是一个数组，0下标：当前state的值，1下标设置新的值时，使用的一个函数

`原则`

- 只能在函数最外层使用hook
- 只能在react函数组件中调用hook

```react
import React ,{useState}from 'react';

function App(props) {
  const arr = useState(0)
  const state = arr[0]
  const setState = arr[1]

  return (
      <div>
        counter：{state}
        <button onClick={event => setState(state+1)}>+1</button>
        <button onClick={event => setState(state-1)}>-1</button>
      </div>

  );
}

export default App;
```

## 多个状态

```react
import React ,{useState}from 'react';

function MultiData(props) {
  const [age,setAge] = useState(18)
  const [name,setName] = useState('zhangpeng')
  const [friends,setFriends] = useState(['lilei','hanmeimei'])
  const [students,setStudents] = useState([
    {age:18,name:'kobe',id:111},
    {age:19,name:'kobccce',id:112},
    {age:133,name:'sdfgobe',id:113},
  ])

  function addStudentAge(index){
    const newStudent = [...students]
    newStudent[index].age+=1
    setStudents(newStudent)
  }

  return (
      <div>
        <h2>age:{age}</h2>
        <h2>name:{name}</h2>
        <div>friend:{friends.map(item =>{
          return (
              <div>{item}</div>
          )
        })
        }</div>
        <button onClick={event => setFriends([...friends,'tomato'])}>添加朋友</button>

        <div>
          {students.map((item,index) =>{
            return (
                <div>
                  <span>age:{item.age}</span>
                  <span>name:{item.name}</span>
                  <span>id:{item.id}</span>
                  <button onClick={event => addStudentAge(index)}>age+1</button>
                </div>
            )
          })}
        </div>
      </div>
  );
}

export default MultiData;

```

