```js
function shen(obj){
  if(typeof obj!=="object"|| obj ===null || obj.constructor === RegExp || obj.constructor ===Date){
    return obj
  }
  let res = Array.isArray(obj)?[]:{}
  for(let key in obj){
    if(obj.hasOwnProperty(key)){
      res[key] = shen(obj[key])
    }
  }
  return res
}

let obj1 = {
  a: {
    c: /a/,
    d: undefined,
    b: null
  },
  b: function () {
    console.log(this.a)
  },
  c: [
    {
      a: 'c',
      b: /b/,
      c: undefined,
      d:new Date()
    },
    'a',
    3
  ]
}
let obj2 = shen(obj1);
obj1.b = undefined
obj1.c[0].a = 'xxxx'
console.log(obj2);
console.log(obj1);
```

