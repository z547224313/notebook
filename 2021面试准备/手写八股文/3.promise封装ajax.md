```js
function ajax(url, method, data) {
    const p = new Promise((res, rej) => {
        const xhr = new XMLHttpRequest();
        xhr.open(method, url, true);
        xhr.onreadystatechange = function() {
            if (xhr.readyState == 4) {
                if (xhr.status == 200) {
                    res(
                        JSON.parse(xhr.responseText)
                    )
                } else if (xhr.status === 404 || xhr.status === 500) {
                    rej(
                        new Errow('404 not found')
                    )
                }
            }
        }
        xhr.send(data);
    })
    return p;
}
```